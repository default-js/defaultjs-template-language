!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";(function(t){const n={global:window||t||self||{},globalVar:function(t,e){return 2===arguments.length&&void 0===n.global[t]&&(n.global[t]=e),n.global[t]}};e.a=n}).call(this,n(1))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e);var i=function(){let t=Array.from(arguments),e=t.shift();for(;t.length>0;){t.shift()(e)}},r=n(0);const o=r.a.globalVar("__DOM_API_EXTENSION_MAP__",{});var s=function(t,e){return function(n){let i=o[n.name];i||(i=o[n.name]={}),i[t]?console.warn('duplicated load of extension "'+t+'"!'):(i[t]=!0,e(n.prototype))}};const l=s("EventSupport",(function(t){const e=function(t,e,n){if(void 0!==t.filter&&!n.target.is(t.filter))return;let i=[n];void 0!==t.data&&(i=i.concat(t.data));let r=e.apply(e,i);return t.singleCall&&this.removeEventListener(e),r},n=t.addEventListener;t.addEventListener=function(){if(arguments.length<2)throw new Error("Too less arguments!");this.on(arguments[0],arguments[1])},t.on=function(){if(arguments.length<2)throw new Error("Too less arguments!");void 0===this.__callbackMap&&(this.__callbackMap={});let t=Array.from(arguments),i=t.shift().split(/(\s+)|(\s*,\s*)/),r={filter:"string"==typeof t[0]?t.shift().split(/\s*,\s*/):void 0,data:"function"!=typeof t[0]?t.shift():void 0},o=t.shift();r.singleCall="boolean"!=typeof t[0]&&t.shift();let s={};return i.forEach(function(t,i,r,o){let l=e.bind(this,i,r);s[o]=l,n.call(this,o,l,!0)}.bind(this,s,r,o)),this.__callbackMap[o]=s,this};const i=t.removeEventListener;t.removeEventListener=t.removeOn=function(){if(1!=arguments.length||void 0===this.__callbackMap)return i.apply(this,arguments);let t=void 0,e=void 0;if("string"==typeof arguments[0])t=arguments[0].split(/(\s+)|(\s*,\s*)/);else{if("function"!=typeof arguments[0])throw new Error("Wrong argument! -> call function([event|handler])");e=arguments[0]}let n=[];if(void 0===t){let t=this.__callbackMap[e];void 0!==t&&(Object.getOwnPropertyNames(t).forEach(function(t,e,n){let i=e[n];void 0!==i&&t.push(i)}.bind(this,n,t)),delete this.__callbackMap[e])}else t.forEach(function(t,e){Object.getOwnPropertyNames(this.__callbackMap).forEach(function(t,e){let n=this.__callbackMap[e];delete n[t],0==Object.getOwnPropertyNames(n).length&&delete this.__callbackMap[e]}.bind(this,e))}.bind(this));return this},t.trigger=function(){let t=Array.from(arguments),e=t.shift(),n=t.length>1?t.shift():void 0,i=n instanceof Event?n:void 0;return"function"==typeof this["on"+e]?(e=document.createEvent("Event"),e.initEvent(e,!0,!0)):e=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n}),e.delegatedEvent=i,this.dispatchEvent(e),this}}));i(EventTarget,l);var a=s("DataSupport",(function(t){t.data=function(){if(void 0===this.__data__&&(this.__data__={},void 0!==this.dataset))for(name in this.dataset)this.__data__[name]=this.dataset[name];return 0==arguments.length?this.__data__:1==arguments.length?this.__data__[arguments[0]]:(void 0===arguments[1]||null==arguments[1]?delete this.__data__[arguments[0]]:this.__data__[arguments[0]]=arguments[1],this)}}));var c=s("ManipulationSupport",(function(t){t.empty=function(){let t=this.childNodes;for(;0!=t.length;)t[0].remove(!0);return this},t.content=function(){return this.childNodes},t.html=function(){return 0==arguments.length?this.innerHTML:1==arguments.length&&"boolean"==typeof arguments[0]?arguments[0]?this.outerHTML:this.innerHTML:(Array.from(arguments).forEach(function(t){"string"==typeof t?this.innerHTML=t:(t instanceof Node||t instanceof NodeList)&&(this.empty(),this.append(t))}.bind(this)),this)},t.append=function(){let e=t.appendChild.bind(this);for(let t=0;t<arguments.length;t++){let n=arguments[t];n instanceof Node?this.appendChild(n):"string"==typeof n?create(n).forEach(e):(Array.isArray(n)||n instanceof NodeList)&&n.forEach(e)}};const e=function(t,e){this.insertBefore(e,t)};t.prepend=function(){let t=this.childNodes.first(),n=e.bind(this,t);for(let e=0;e<arguments.length;e++){let i=arguments[e];Array.isArray(i)||i instanceof NodeList?i.forEach(n):i instanceof Node?this.insertBefore(i,t):"string"==typeof i&&i.forEach(n)}}}));i(Node,a,c);const u=/:parent(\(\"([^\)]*)\"\))?/i,f=function(t,e){let n=u.exec(e);if(!n)return t.querySelectorAll(e);{let i=t;if(n.index>0&&(i=t.querySelectorAll(e.substr(0,n.index)),0==i.length))return;if(i=i.parent(n[2]),i){let t=e.substr(n.index+n[0].length).trim();return t.length>0&&(i=i.find(t)),i}}};var h=s("QuerySupport",(function(t){t.find=function(){let t=[],e=Array.from(arguments),n=e.shift();for(;n;){if("string"==typeof n){let e=f(this,n);e&&t.push(e)}n=e.shift()}let i=NodeList.from.apply(null,t);return i},t.is=function(){if(this instanceof Document)return!1;if(1==arguments.length){if("string"==typeof arguments[0])return this.matches(arguments[0]);if("number"==typeof arguments[0].length){let t=arguments[0];for(let e=0;e<t.length;e++)if(this.matches(t[e]))return!0}}else if(arguments.length>1)return this.is(Array.from(arguments));return!1},t.parent=function(){if(this.parentNode){if("string"==typeof arguments[0]){let t=this.parentNode;try{for(;t&&!t.is(arguments[0]);)t=t.parent(arguments[0])}catch(e){console.error("this:",this,"parent:",t,"error:",e)}return t}return this.parentNode}},t.parents=function(){let e=new Array,n=t.parent.apply(this,arguments);for(;n;)e.push(n),n=t.parent.apply(n,arguments);return NodeList.from(e)},t.selector=function(){if(!(this instanceof Document)){if(this.id)return"#"+this.id;{let t=this.tagName.toLowerCase(),e=this.parent();if(e){let n=e.find(":scope>"+t);if(n instanceof NodeList){let e=n.indexOf(this);e>0&&(t+=":nth-child("+(e+1)+")")}let i=e.selector();return i?i+">"+t:t}return t}}},t.closest=function(t){let e=this;for(;e;){let n=e.find(t);if(n&&n.length>0)return n;if(e.is(t))return NodeList.from(e);e=e.parent()}},t.nested=function(t){if(this.is(t))return NodeList.from(this);let e=this.find(t);return e&&e.length>0?e:NodeList.from(this.parent(t))}}));const d=s("AttributeSupport",(function(t){t.attr=function(){return 0==arguments.length?this.hasAttributes()?function(){let t={};return this.getAttributeNames().forEach(function(t,e){t[e]=this.getAttribute(e)}.bind(this,t)),t}.call(this):void 0:1==arguments.length?this.getAttribute(arguments[0]):(void 0===arguments[1]||null==arguments[1]?this.removeAttribute(arguments[0]):this.setAttribute(arguments[0],arguments[1]),this)}}));i(Element,h,d,c);const p=s("ReadyEventSupport",(function(t){t.ready=function(t,e){return this.on("ready",t,e),"complete"==document.readyState&&this.trigger("ready"),this}}));i(Document,h,p),document.addEventListener("DOMContentLoaded",(function(){document.trigger("ready")})),i(DocumentFragment,h,c);var g=s("HtmlClassSupport",(function(t){t.addClass=function(){return 1==arguments.length?arguments[0].split(/\s+/).forEach(function(t){this.classList.add(t)}.bind(this)):arguments.length>1&&Array.prototype.forEach.call(arguments,function(t){this.addClass(t)}.bind(this)),this},t.removeClass=function(){return 1==arguments.length?arguments[0].split(/\s+/).forEach(function(t){this.classList.remove(t)}.bind(this)):arguments.length>1&&Array.prototype.forEach.call(arguments,function(t){this.removeClass(t)}.bind(this)),this},t.toggleClass=function(){return 1==arguments.length?arguments[0].split(/\s+/).forEach(function(t){this.classList.toggle(t)}.bind(this)):arguments.length>1&&Array.prototype.forEach.call(arguments,function(t){this.toogleClass(t)}.bind(this)),this}}));const y=s("ShowHideSupport",(function(t){t.show=function(){return this.__ishide&&(this.style.display=this.__display||"",this.__ishide=!1),this},t.hide=function(){return this.__ishide||(this.__display=this.style.display,this.style.display="none",this.__ishide=!0),this},t.toggleShow=function(){return this.__ishide?this.show():this.hide()}}));i(HTMLElement,g,y);const m=[{selector:"select",get:function(){let t=[];return this.find("option").forEach((function(e){e.selected&&t.push(e.value)})),t},set:function(){let t=[],e=Array.from(arguments),n=e.shift();for(;n;)Array.isArray(n)?t=t.concat(n):t.push(n),n=e.shift();this.value=t,this.find("option").forEach((function(e){e.selected=t.indexOf(e.value)>=0})),this.trigger("changed")}},{selector:'input[type="checkbox"], input[type="radio"]',get:function(){return"on"==this.value||"off"==this.value?this.checked:this.checked?this.value:void 0},set:function(t){"boolean"==typeof t?this.checked=t:"string"==typeof t?this.checked=this.value==t:Array.isArray(t)&&(this.checked=t.indexOf(this.value)>=0),this.trigger("changed")}}],v={get:function(){return this.value},set:function(t){this.value=t,this.trigger("input")}},b=function(t){for(let e=0;e<m.length;e++)if(t.is(m[e].selector))return m[e];return v};var N=s("ValueSupport",(function(t){t.val=function(){let t=b(this);return 0==arguments.length?t.get.apply(this,arguments):(t.set.apply(this,arguments),this)}}));i(HTMLInputElement,N),i(HTMLTextAreaElement,s("ValueSupport",(function(t){t.val=function(){return 0==arguments.length?this.value:(this.value=arguments[0],this)}}))),i(HTMLSelectElement,N);var _=function(){let t=Array.from(arguments),e=t.shift(),n=t.shift();t.forEach(function(t,e,n){Object.getOwnPropertyNames(n).forEach(function(t,e,n,i){let r=Object.getOwnPropertyDescriptor(e,i);void 0===t[i]&&"function"==typeof r.value&&(t[i]=function(){return n.call(this,i,arguments)})}.bind(null,t,n,e))}.bind(null,n,e))};const E=s("ListSupport",(function(t){t.indexOf=function(){for(let t=0;t<this.length;t++)if(this[t]==arguments[0])return t;return-1},t.forEach=function(){return Array.prototype.forEach.apply(Array.from(this),arguments)},t.first=function(){if(this.length>0)return this[0]},t.last=function(){if(this.length>0)return this[this.length-1]}}));i(NodeList,E),NodeList.prototype.applyTo=function(){let t=Array.from(arguments),e=t.shift(),n="function"==typeof e,i=[];for(let r=0;r<this.length;r++){let o,s=this[r];n?o=e.apply([s].concat(t)):"function"==typeof s[e]&&(o=s[e].apply(s,t)),o&&i.push(o)}return i},NodeList.prototype.val=function(){if(0==arguments.length){if(this.length>0){let t=new Map;return this.forEach((function(e){if("function"==typeof e.val){e.val()&&t.set(e.name||e.id||e.selector(),e.val())}})),t}}else NodeList.prototype.applyTo.apply(this,["val"].concat(Array.from(arguments)))},NodeList.from=function(){let t=Array.from(arguments),e={},n=0;for(;t.length>0;){let i=t.shift();if(void 0!==i&&null!=i)if(i instanceof Node)e[n++]={value:i,enumerable:!0};else if(i instanceof NodeList||Array.isArray(i))for(let t=0;t<i.length;t++)i[t]&&i[t]instanceof Node&&(e[n++]={value:i[t],enumerable:!0})}return e.length={value:n},Object.create(NodeList.prototype,e)},_((function(t,e){let n=[];return this.forEach((function(i){if(i&&"function"==typeof i[t]){let r=i[t].apply(i,e);r&&(r instanceof NodeList?n=n.concat(Array.from(r)):n.push(r))}})),0===n.length?void 0:n[0]instanceof Node||n[0]instanceof NodeList?NodeList.from.apply(null,n):n}),NodeList.prototype,Node.prototype,HTMLElement.prototype,HTMLInputElement.prototype,Element.prototype,EventTarget.prototype),r.a.global.defaultjs=r.a.global.defaultjs||{},r.a.global.defaultjs.extdom=r.a.global.defaultjs.extdom||{VERSION:"1.0.0-beta.1",utils:{Utils:r.a}};const x=new DOMParser;r.a.global.find=function(){return document.find.apply(document,arguments)},r.a.global.ready=function(){return document.ready.apply(document,arguments)},r.a.global.create=function(t,e){if("string"!=typeof arguments[0])throw new Error("The first argument must be a string!");let n=x.parseFromString(arguments[0].trim(),arguments[1]||"text/html"),i=n.body.childNodes,r=document.createDocumentFragment();return r.append(i),r.childNodes};var T={onExecute:"jstl-on-execute",onSuccess:"jstl-on-success",onFail:"jstl-on-fail",onReady:"jstl-on-ready"},A={INIT:1e3,CONDITION:2e3,CONTEXT:3e3,MANIPULATION:4e3,CONTENT:5e3,CLEANING:6e3,CHILDREN:7e3,BINDING:8e3,FINISH:9e3};const L=function(t,e){return console.log("execute chain:",e.task.id,"context:",t),Promise.resolve(e.task.accept(t)).then((function(n){return n?Promise.resolve(e.task.execute(t)).then((function(t){return t.exit||null==e.next?t:L(t,e.next)})):null==e.next?t:L(t,e.next)}))};var P=function(){const t={};return{chain:null,add:function(e,n){void 0===t[e.id]&&(this.chain=function(t,e){if(null==e)return t;let n=null,i=e;for(;null!=i;){if(i.phase>t.phase)return t.next=i,null==n?t:(n.next=t,e);n=i,i=i.next}return n.next=t,e}({task:e,phase:void 0!==n?n:A.FINISH,next:null},this.chain))},execute:function(t){return L(t,this.chain)}}};const O=new P;var w={addTask:function(t,e){O.add(t,e)},getTaskchain:function(){return O},execute:function(t,e,n){console.log("process:",t),t.trigger(T.onExecute);const i={element:t,data:e,root:n||t,processor:this};return O.execute(i).then((function(i){return void 0===n?Promise.resolve({element:t,data:e}):(i.element.trigger(T.onReady),Promise.resolve(i))})).catch((function(r){return console.error(r),void 0===n?Promise.resolve({element:t,data:e}):(t.trigger(T.onFail),Promise.resolve(i))}))}};const k={id:"async",accept:function(t){return!1},execute:function(t){return Promise.resolve(t)}};w.addTask(k,A.INIT);const M={id:"attribute",accept:function(t){return!1},execute:function(t){return Promise.resolve(t)}};w.addTask(M,A.MANIPULATION+200);const j={id:"choose",accept:function(t){return!1},execute:function(t){return Promise.resolve(t)}};w.addTask(j,A.MANIPULATION+100);const I={id:"data",accept:function(t){return!1},execute:function(t){return Promise.resolve(t)}};w.addTask(I,A.CONTEXT+100);const C={id:"foreach",accept:function(t){return!1},execute:function(t){return Promise.resolve(t)}};w.addTask(C,A.MANIPULATION);const S=/\$\{([^\{\}]+)\}/,H=function(t,e,n,i){if("number"==typeof i&&i>0)return new Promise((function(i){setTimeout((function(){i(H(t,e,n))}))}));if("string"!=typeof t)return Promise.resolve(t);let r=t.trim();if(0==r.length)return Promise.resolve(n);try{return new Function("aContext","try{\twith(aContext || window || global || self || this){\t\treturn Promise.resolve("+r+");\t}}catch(e){\tthrow e;}")(e).then((function(t){return void 0===t?Promise.resolve(n):Promise.resolve(t)})).catch((function(t){return Promise.reject(t)}))}catch(t){return Promise.reject(t)}},D=function(t,e,n,i){if("number"==typeof i&&i>0)return new Promise((function(i){setTimeout((function(){i(D(t,e,n))}))}));const r=S.exec(t);return null!=r?H(r[1],e,n).then((function(i){return D(t.split(r[0]).join(i),e,n)})):Promise.resolve(t)};const F={ExpressionResolver:{resolve:function(t,e,n,i){const r=S.exec(t);return H(r?r[1]:t,e,n,i)},resolveText:D}}.ExpressionResolver,R={id:"if",accept:function(t){return Promise.resolve(t.element.is("[jstl-if]"))},execute:function(t){console.log("execute if",t);const e=t.element.attr("jstl-if");return F.resolve(e,t.data,!1).then((function(n){return console.log("if",t,"expr:",e,"->",n),n||t.element.remove(),t.exit=!!n,Promise.resolve(t)}))}};w.addTask(R,A.CONDITION);const V={id:"include",accept:function(t){return!1},execute:function(t){return Promise.resolve(t)}};w.addTask(V,A.CONTEXT);const U={id:"text",accept:function(t){return!1},execute:function(t){return Promise.resolve(t)}};w.addTask(U,A.CONTENT);const X=function(t,e,n){return n.processor.execute(t[e],n.data,n.root).then((function(n){const i=e+1;return t.length>i?X(t,i,n):n}))},B={id:"children",accept:function(t){const e=t.element.children;return null!=e&&e.length>0},execute:function(t){return X(Array.from(t.element.children),0,t)}};w.addTask(B,A.CHILDREN);var $={TaskChain:P,Processor:w};const q=window||q||self||{};q.defaultjs=q.defaultjs||{},q.defaultjs.tl=q.defaultjs.tl||{VERSION:"1.0.0-beta.1",TaskChain:$.TaskChain}}]);